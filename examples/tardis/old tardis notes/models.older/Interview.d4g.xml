<?xml version="1.0"?>
<model about="urn:fr.telecom-paristech:models:Interview"
       xmlns="http://www.cs.wpi.edu/~rich/d4g"
       xmlns:t="http://www.cs.wpi.edu/~rich/cetask/cea-2018-ext">

  <!--This is a simple example of an interview start.
      Basic idea: 4 step plan of an _Opening, _Who_To_See, _Applicant_Name, _Interview_Person, _Closing.

Opening, Who_To_See, Applicant_Name, and Closing are just d4g trees.

  -->

  <t:task id="Interview">
    <t:output name="interviewee" type="string"/>

    <t:subtasks id="how_to_interview">
      <t:step name="open" task="_Opening"/>
      <t:step name="who" task="_Who_To_See"/>
      <t:step name="name" task="_Applicant_Name"/>
      <t:step name="interview" task="_Interview_Person" />
      <t:step name="close" task="_Closing" />
      <t:binding slot="$this.interviewee" value="interviewee"/>

    </t:subtasks>
  </t:task>

  <t:task id="_Interview_Person">

    <t:subtasks id="actual_interview">
      <t:step name="greet" task="_Greet_Interviewee"/>
      <t:step name="resume" task="_Get_Resume"/>
      <t:step name="discussr" task="_DiscussResume" />
      <t:step name="discusse" task="_DiscussEducation" />
      <t:step name="discussj" task="_DiscussJob" />
      <t:step name="interests" task="_DiscussInterests" />

      <!--
	  <t:step name="jobc" task="_Discuss_Job_Categories"/>
	  <t:step name="train" task="_Discuss_Training"/>

      -->
    </t:subtasks>
  </t:task>

  <t:task id="_DiscussJob">
    <t:subtasks id="jobrelated">
      <t:step name="dl" task="_DiscussLearn" />
      <t:applicable> job1 != null </t:applicable>
    </t:subtasks>
    <t:subtasks id="afterschool">
      <t:step name="dua" task="_DiscussUsefulActivity" />
    </t:subtasks>
  </t:task>

  <t:task id="_Shake_Hands">
    <t:script> println("[Agent and User Shake Hands now]"); </t:script>
  </t:task>

  <t:task id="ChangeEmotion">
   <t:script> emotion="happy"; </t:script>    
  </t:task>

  <t:script init="true"> 
	  var studentLikedAtSchool;
	  var companyBusiness; 
	  var interviewer; 
	  var interviewee; 
	  var emotion; 
	  var education1; 
	  var job1; 
	  companyBusiness="computer technology"; 
	  emotion="sad"; 
	  interviewer="Marceau"; 
	  interviewee="Daniel Blanc"; 
	  education1="12th grade at the Lycee de Paris"; 
	  job1="Mcdonald's";
  </t:script>

  <agent id="_Opening" text="Good morning">
    <user id="Hello" text="Hello">
      <!-- to be said by the coach -->
      <agent text="Coach says:  A better way to respond would be to say 'Good morning'.  It conveys respect. Try starting over." 
	     applicable= "emotion == 'happy' ">
	<user text="sure!">
	   <do task="_Opening" />
	</user>
	<user text="okay">
	  <do task="_Opening" />
	</user>
      </agent>
      <agent text="Coach says: You seem a bit under the weather.  If you are nervous, don't be.  This is a chance to learn and get a job! Try again with good morning."
	     applicable= "emotion == 'sad' "> <!-- &#61;&#61; &quot;sad&quot; -->
	<user text="okay">
	  <do task="_Opening" />
	</user>
      </agent>
    </user>
    <user text="Good morning">
    </user>
    <user text="Hi">
      <agent ref="Hello"/>
    </user>
    <user text="hey">
      <agent ref="Hello"/>
    </user>
  </agent>

  <agent id="_Applicant_Name" text="What is your name?">
    <user text=" {interviewee} "> 
      <agent text="Yes, please sit down and Mr. {interviewer}  will be with you shortly"/>
    </user>
  </agent>

  <agent id="_Who_To_See"  text="How may I help you?">
    <user text="I'm here to see {interviewer}.">
      <agent text="Just a minute, please."/>
    </user>
  </agent>

 <agent id="_Greet_Interviewee"  text="Hello I am Mr {interviewer}.">
    <user text="Hi">
      <!-- to be said by the coach -->
      <agent text="Coach says: You could respond by telling the interviewer your name.  Try again."/>
	<user text="okay">
	  <do task="_Greet_Interviewee" />
	</user>
    </user>
    <user text="Hello, I'm {interviewee}" >
      <agent text="Good to meet you.">
	<do task="_Shake_Hands" />
      </agent>
    </user>
    <user text="Hey man what's up?">
      <!-- to be said by the coach -->
      <agent text="Coach says: You could better respond with a greeting such as 'Hello' and your name. How about trying this again."  >  
	<user text="okay" >
	<!--  <do task="Change_emotion" /> -->
	  <do task="_Greet_Interviewee" />
	</user>
      </agent>
    </user>
 </agent>

 <agent id="_Get_Resume"  text="May I have your resume?">
    <user text="Sure here it is.">
      <agent text="Thank you.">
			<user text="you are welcome." />
			<user text="yes, that's right."/>
      </agent>
    </user>
    <user text="Uh, I don't have a resume." >
      <!-- to be said by the coach -->
      <agent text="Coach says: A resume tells your employer about your past experience, both your education and work experience if you have any.  You will need a resume for your employer. After this game, you can create a resume with the ResumeHelper game. For now, start again and tell the interviewer that you did not bring one.">  
	<user text="okay" >
	  <do task="_Get_Resume" />
	</user>
      </agent>
    </user>
    <user text="I didn't bring one today.">
      <agent text="well, we can continue but make sure to bring one tomorrow and leave it with the receptionist."  >
	<user text="I guess so." >
	</user>
	<user text="okay, I'll bring it tomorrow."/>
	<do task="_DiscussInterests" />
      </agent>
    </user>
  </agent>


<agent id="_DiscussResume" text="Let's see your resume.">
  <user text="Okay.">
	<agent text="First, let us talk about your education.">
	</agent>
  </user>
</agent>


<agent id="_DiscussEducation" text="I see from your resume that you are in {education1}, is that correct?">
  <user text="I guess so.">
	<agent text ="Can you tell me what you most liked that you learned in school?">
		<user text="computer technology">
			<agent text="Very good, that's relevant to our business." />
			<!-- <t:script> studentLikedAtSchool="computer technology"; </t:script>    -->
		</user>
		<user text="sports">
		  <!--	<t:script> studentLikedAtSchool="sports"; </t:script> -->
		  <agent text="I see." />
		</user>
		<!-- 
		<user text="science">
			<t:script> studentLikedAtSchool="science"; </t:script>    
		</user>
		<user text="english">
			<t:script> studentLikedAtSchool="english"; </t:script>    
		</user>
		-->
		<!-- if studentLikedAtSchool == companyBusiness then say "oh good !", otherwise "okay." and coach tells the user to try again
		<agent text="good!"
		       applicable="studentLikedAtSchool == companyBusiness" >
		</agent>
		<agent text="I see.">
		</agent>
		-->
	</agent>
	
  </user>
</agent>
  
<agent id="_DiscussLearn" text="I see from your resume that you have worked at {job1}. What did you learn there ?">
  <user text="nothin' special.">
	<agent text="Coach says : try to think of some skill that you could have developped at your job, like teamwork, or resistance to pressure. These are called 'transferable skills' and are very important. Even if your previous job wasn't exactly in the company field, you should be able to point out something that experience gave you">
		<user text="oh, right. I'll try again">
			<do task="_DiscussLearn"/>
		</user>
	</agent>
  </user>
  <user text="Teamwork.">
  </user>
  <user text="Responsibility.">
  </user>
</agent>


<agent id="_DiscussUsefulActivity" text="I see that you didn't specify any work experience in your resume. Have you done any unpaid work ?">
  <user text="nothin' special.">
	<agent text="Coach says : try again !">
		<user text="oh, right. I'll try again">
			<do task="_DiscussUsefulActivity"/>
		</user>
	</agent>
  </user>
  <user text="I've watched over the neighbour's kids a few times.">
  </user>
  <user text="I've refereed some soccer games.">
  </user>
</agent>

<agent id="_DiscussInterests" text="Tell me what you do outside of school.">
  <user text="I jus' hang out with me friends."/>
  <user text="I don' do nothing." >
  </user>
</agent>

 <agent id="_Closing"  text="Well, Thank you for coming.  We will review your case further." >
   <user text="thank you." >
      <agent text="You are welcome.  Good bye." >
	<user text="Good-bye" />
      </agent>
   </user>
   <user text="yeh that was great.">
     <agent text="Try just saying thank you and good bye.">
	<do task="_Closing" />
     </agent>
   </user>
   <user text="you mean I don't have a job?">
     <agent text="Coach says: Companies generally do not offer jobs at interviews.  They interview lots of candidates and pick the most qualified people.">  <!-- to be said by teh coach -->
       <user text="oh, so no job yet.">
	 <agent text="Coach says: Right. But they may call you.">
	   <user text="I sure hope so." >
	   </user>
	   <user text="Seems like a lot of work for nothing." >
	     <agent text="Start again and just say thank you and good bye for now.">
	       <do task="_Closing" />
	     </agent>
	   </user>
	 </agent>
       </user>
       <user text="oh, too bad. okay.">
	 <agent text="Coach says: But they may choose you.  For now, just say thank you and good bye.">
	   <do task="_Closing"/>
	 </agent>
       </user>
     </agent>
   </user>
 </agent>
</model>

 <!-- Talking about interests:

   Can you tell me what you most liked that you learned in school?

       I really liked : digital media, math, languages, science, wood shop, cooking, computer technology.
         Store this info in a user model?
       agent response:  depending on the interviewer, some of these will be more pertinent.  Suppose interviewer is from a company that does digital media.  Then digital media, math and computer technology responses would be relevant and might lead to a followup question such as:  (for digital media), what sort of projects did you do?  Or, I see that your resume says you built your own website.  (for computer technology) Did you do project in computer technology for (whatever-not sure what to ask here).  (For math) did you complete math through calculus?


    You haven't any work record.  
    Have you done any unpaid work?
       yes, I've done work for some friends and family.
       no, nothing.

    You have some work record.  
    Did you do work after school or in the summer?  
       after school.
       in the summer.
       both after school and in the summer.  
    Good, that means you do know how to hold a job!

-->