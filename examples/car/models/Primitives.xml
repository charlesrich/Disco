<taskModel about="urn:car.wpi.edu:Primitives" xmlns="http://www.cs.wpi.edu/~rich/cetask/cea-2018-ext">

  <task id="Unscrew">
    <input name="stud" type="Stud"/>
    <output name="nut" type="Nut"/>
    <precondition>
      $this.stud.getNut() != null
    </precondition>
    <postcondition sufficient="true">
      $this.stud.getNut() == null
    </postcondition>
    <script>
      $this.nut = $this.stud.getNut(); 
      $this.stud.setNut(null);
     </script>
  </task>

  <task id="Screw">
    <input name="nut" type="Nut" modified="newNut"/>
    <input name="stud" type="Stud"/>
    <output name="newNut" type="Nut"/>
    <precondition>
      $this.stud.getNut() == null
    </precondition>
    <postcondition sufficient="true">
      $this.stud.getNut() === $this.newNut
    </postcondition>
    <script>  
      $this.newNut.setLocation($this.stud.getLocation());
      $this.stud.setNut($this.newNut);
    </script>
  </task>

  <task id="Unhang"> 
    <input name="hub" type="Hub"/>
    <output name="tire" type="Tire"/>
    <precondition> 
      $this.hub.getTire() != null &amp;&amp;
      $this.hub.studA.getNut() == null &amp;&amp; $this.hub.studB.getNut() == null &amp;&amp; $this.hub.studC.getNut() == null
    </precondition>
    <postcondition sufficient="true"> 
      $this.hub.getTire() == null
    </postcondition>
    <script>
      $this.tire = $this.hub.getTire();
      $this.hub.setTire(null);
    </script>
  </task>

  <task id="Hang">
    <input name="tire" type="Tire" modified="newTire"/>
    <input name="hub" type="Hub"/>
    <output name="newTire" type="Tire"/>
    <precondition> 
      $this.hub.getTire() == null &amp;&amp;
      $this.hub.studA.getNut() == null &amp;&amp; $this.hub.studB.getNut() == null &amp;&amp; $this.hub.studC.getNut() == null
    </precondition>
    <postcondition sufficient="true"> 
      $this.hub.getTire() === $this.newTire
    </postcondition>
    <script>
      $this.newTire.setLocation($this.hub.getLocation());
      $this.hub.setTire($this.newTire);
    </script>
  </task>
  
  <task id="PickUp">
    <input name="object" type="PhysObj" modified="newObject"/>
    <output name="newObject" type="PhysObj"/>
    <script>
      $this.newObject.setLocation(
        Location.plus($this.object.getLocation(), 0, 0, 1));
      if ( $this.object instanceof Nut ) 
        $world.LOOSE_NUTS.remove($this.object);

    </script>
  </task>

  <task id="PutDown">
    <input name="object" type="PhysObj" modified="newObject"/>
    <output name="newObject" type="PhysObj"/>
    <script>
      $this.newObject.setLocation(
        new Location($this.object.getLocation().x,
                     $this.object.getLocation().y,
                     0));
      if ( $this.object instanceof Nut ) 
        $world.LOOSE_NUTS.add($this.newObject);
      </script>
  </task>

  <script init="true">
    importPackage(Packages.edu.wpi.car)  
  </script>
  
</taskModel>
